# Ralph Orchestrator Configuration for Claude
# v2 nested format - optimized for Claude Code CLI

# Event loop settings
event_loop:
  completion_promise: "LOOP_COMPLETE"
  max_iterations: 100
  max_runtime_seconds: 14400      # 4 hours
  idle_timeout_secs: 1800

# CLI backend settings
cli:
  backend: "claude"
  prompt_mode: "arg"              # Pass prompt as CLI argument

# Core behaviors (always injected into prompts)
core:
  scratchpad: ".agent/scratchpad.md"
  specs_dir: "./specs/"
  guardrails:
    - "Fresh context each iteration - scratchpad is memory"
    - "Don't assume 'not implemented' - search first"
    - "Backpressure is law - tests/typecheck/lint must pass"

hats:
  code-simplifier:
    name: "code-simplifier"
    triggers: ["simplify.start"]
    publishes: ["simplify.done"]
    instructions: |
      Use the code-simplifier agent to simplify code
#
#   builder:
#     name: "Builder"
#     triggers: ["build.task"]
#     publishes: ["build.done", "build.blocked"]
#     instructions: ""            # Empty = use default rich prompt
#
#   # Example: Add a reviewer hat
#   reviewer:
#     name: "Reviewer"
#     triggers: ["review.request"]
#     publishes: ["review.done", "review.rejected"]
#     instructions: |
#       Review the implementation for correctness, style, and security.
#       If good: publish review.done
#       If problems: publish review.rejected with specific feedback

# Feature flags
verbose: false
